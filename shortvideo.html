<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Dungarpur Live – Shorts</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}
body{background:#000;color:#fff;overflow:hidden;}

/* HEADER */
header{
  background:#fff;
  padding:12px 15px;
  border-bottom:3px solid #d60000;
  position:sticky;
  top:0;
  z-index:999;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.logo{
  font-size:20px;
  font-weight:800;
  color:#d60000;
  display:flex;
  align-items:center;
}
.live-dot{
  width:10px;height:10px;background:red;border-radius:50%;
  margin-left:6px;animation:blink 0.8s infinite;
}
@keyframes blink{0%{opacity:1;}50%{opacity:0;}100%{opacity:1;}}

/* SHORTS STYLE */
.short-container{
  height:100vh;
  overflow-y:scroll;
  scroll-snap-type:y mandatory;
  background:#000;
}
.short-box{
  height:100vh;
  scroll-snap-align:start;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#000;
  position:relative;
}
.short-frame{
  width:100%;
  height:100%;
  border:none;
}
.short-title{
  position:absolute;
  bottom:20px;left:10px;
  color:#fff;font-size:18px;
  font-weight:700;
  text-shadow:0 0 5px #000;
  background:rgba(0,0,0,0.3);
  padding:6px 10px;
  border-radius:6px;
}
</style>
</head>

<body>

<header>
  <div class="logo">Shorts <div class="live-dot"></div></div>
  <div style="font-size:12px;color:#444;font-weight:600;">Dungarpur Live</div>
</header>

<!-- SHORT VIDEO CONTAINER -->
<div class="short-container" id="shortContainer"></div>

<script>
// -------------------------
//    DEMO VIDEO LIST
// -------------------------
let videoList = [
  {id:"iS3P0H7wx2k", title:"राजस्थान की सबसे वायरल खबर!"},
  {id:"6Dh-Rf5V-5M", title:"सोशल मीडिया पर धूम"},
  {id:"Mq4A2NE2HXI", title:"Village Life Viral"},
  {id:"jNQXAC9IVRw", title:"YouTube का पहला वीडियो"},
  {id:"uYi1I3Vzsu0", title:"Funny वायरल वीडियो!"}
];

// For infinite scroll demo — repeat videos
let allVideos = [...videoList, ...videoList, ...videoList];

let loadIndex = 0;
const batchSize = 3;

function loadMoreShorts(){
  const container = document.getElementById("shortContainer");

  for(let i = loadIndex; i < loadIndex + batchSize && i < allVideos.length; i++){
    let v = allVideos[i];

    let div = document.createElement("div");
    div.className = "short-box";

    div.innerHTML = `
      <iframe class="short-frame"
        src="https://www.youtube.com/embed/${v.id}?enablejsapi=1&playsinline=1&mute=1"
        allow="autoplay"
      ></iframe>
      <div class="short-title">${v.title}</div>
    `;

    container.appendChild(div);

    // Observe for autoplay
    autoObserver.observe(div);
  }

  loadIndex += batchSize;
}

// Initial load
loadMoreShorts();


// -------------------------
//   INFINITE SCROLL
// -------------------------
const shortContainer = document.getElementById("shortContainer");

shortContainer.addEventListener("scroll", () => {
  if(shortContainer.scrollTop + shortContainer.clientHeight >= shortContainer.scrollHeight - 20){
    loadMoreShorts();
  }
});


// -------------------------
//   AUTOPLAY ON FOCUS
// -------------------------
let autoObserver = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    const iframe = entry.target.querySelector("iframe");
    if(!iframe) return;

    if(entry.isIntersecting){
      iframe.contentWindow.postMessage(
        '{"event":"command","func":"playVideo","args":""}', '*'
      );
    } else {
      iframe.contentWindow.postMessage(
        '{"event":"command","func":"pauseVideo","args":""}', '*'
      );
    }
  });
}, {threshold:0.75});

</script>

</body>
</html>
