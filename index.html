<!DOCTYPE html>  
<html lang="en">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">  
<title>Dungarpur Live News</title>  
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">  
  
<style>  
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}  
body{background:#f7f7f7;color:#222;overflow-x:hidden;}  

.live-dot{width:10px;height:10px;background:red;border-radius:50%;margin-left:6px;animation:blink 0.8s infinite;}  
@keyframes blink{0%{opacity:1;}50%{opacity:0;}100%{opacity:1;}}  

header{background:#fff;padding:12px 15px;border-bottom:3px solid #d60000;position:sticky;top:0;z-index:999;display:flex;justify-content:space-between;align-items:center;}  
.logo{font-size:20px;font-weight:800;color:#d60000;display:flex;align-items:center;}  
.time-box{font-size:12px;font-weight:600;color:#444;text-align:right;line-height:14px;}  
.time-box span{color:#d60000;font-weight:700;}  

.category-bar{background:#d60000;padding:10px 5px;overflow-x:auto;white-space:nowrap;scrollbar-width:none;}  
.category-bar::-webkit-scrollbar{display:none;}  
.category-bar a{color:#fff;text-decoration:none;margin-right:18px;font-size:14px;font-weight:600;}  

.rate-box{  
  background:#0f0f0f;  
  padding:15px;  
  margin:4px 6px;  
  border-radius:14px;  
  border:2px solid #D4AF37;  
  box-shadow:0 0 12px rgba(212,175,55,0.4);  
}  
.rate-box h3{font-size:15px;font-weight:700;color:#D4AF37;}  
.rate-box p{font-size:13px;margin-top:3px;color:#eee;}  

.ticker{background:#222;color:#fff;padding:8px;font-size:13px;overflow:hidden;white-space:nowrap;}  
.ticker span{display:inline-block;padding-left:100%;animation:scroll 12s linear infinite;font-weight:600;}  
@keyframes scroll{0%{transform:translateX(0);}100%{transform:translateX(-100%);}}  

.hero{margin:15px auto;width:100%;padding:0 10px;}  
.hero-left{width:100%;height:230px;background:url('https://c.ndtvimg.com/2025-11/9nrb9sq8_vasundhara-raje-dungarpur_625x300_29_November_25.jpg') center/cover;border-radius:12px;position:relative;}  
.hero-left .text{position:absolute;bottom:0;width:100%;padding:15px;background:linear-gradient(transparent,rgba(0,0,0,0.9));border-radius:0 0 12px 12px;}  
.hero-left h2{font-size:18px;font-weight:800;color:#fff;line-height:22px;}  

.highlight-box{margin-top:10px;padding:0 12px;}  
.highlight{background:#fff;padding:12px;margin-bottom:10px;border-left:5px solid #d60000;border-radius:10px;}  

.section-title{font-size:18px;font-weight:700;margin:20px 12px 10px;border-left:5px solid #d60000;padding-left:10px;}  

.grid{display:grid;grid-template-columns:1fr;gap:15px;padding:0 12px;}  
.card{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 3px 6px rgba(0,0,0,0.1);cursor:pointer;}  
.card img{width:100%;height:170px;object-fit:cover;}  
.card .content{padding:12px;}  
.card h3{font-size:16px;color:#d60000;font-weight:700;}  
.card p{font-size:13px;margin-top:5px;color:#444;}  

footer{background:#111;color:#ccc;text-align:center;padding:12px;font-size:12px;margin-top:20px;}  

.popup-bg{  
  position:fixed;top:0;left:0;width:100%;height:100%;  
  background:rgba(0,0,0,0.7);display:none;justify-content:center;  
  align-items:center;z-index:9999;padding:20px;  
}  
.popup-box{  
  background:#fff;width:100%;max-width:420px;border-radius:12px;  
  padding:20px;box-shadow:0 0 20px rgba(0,0,0,0.4);animation:pop .3s ease;  
  max-height:90vh;  
  overflow-y:auto;  
}  
@keyframes pop{0%{transform:scale(0.7);}100%{transform:scale(1);}}  

.popup-img{width:100%;border-radius:10px;margin-bottom:10px;}  
.popup-title{font-size:20px;font-weight:800;color:#d60000;margin-bottom:10px;}  
.popup-text{font-size:14px;color:#333;line-height:20px;margin-bottom:15px;white-space:pre-line;}  
.close-btn, .share-btn{  
  padding:10px 14px;border:none;border-radius:8px;font-weight:600;  
  cursor:pointer;font-size:14px;  
}  
.close-btn{background:#444;color:#fff;}  
.share-btn{background:#d60000;color:#fff;margin-left:10px;}  
.btns{display:flex;justify-content:flex-end;}  
</style>  
</head>  
<body>  

<header>  
  <div class="logo">Dungarpur Live News <div class="live-dot"></div></div>  
  <div class="time-box">  
    <span id="live-date"></span><br>  
    <span id="live-time"></span>  
  </div>  
</header>  

<script>  
function updateDateTime(){  
  const now = new Date();  

  const day = now.getDate();  
  const month = now.toLocaleString('en-US', { month: 'short' });  
  const year = now.getFullYear();  

  let hrs = now.getHours();  
  let mins = now.getMinutes();  
  let ampm = hrs >= 12 ? "PM" : "AM";  
  hrs = hrs % 12 || 12;  
  mins = mins < 10 ? "0" + mins : mins;  

  document.getElementById('live-date').innerText = `${day} ${month} ${year}`;  
  document.getElementById('live-time').innerText = `${hrs}:${mins} ${ampm}`;  
}  
setInterval(updateDateTime,1000);  
updateDateTime();  
</script>  

<div class="category-bar">  
  <a href="#">Latest</a>  
  <a href="#">Local</a>  
  <a href="#">Breaking</a>  
  <a href="#">Crime</a>  
  <a href="#">Weather</a>  
  <a href="#">Sports</a>  
</div>  

<div class="rate-box">  
  <h3>üíé KESRI Jewellers ‚Äî Live Rate</h3>  
  <p>Gold 22K: ‚Çπ12,560 /gm |  Silver: ‚Çπ164 /gm</p>  
</div>  

<div class="ticker">  
  <span>Dungarpur me strong ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§ï‡§æ alert... | Sagwara road ‡§¨‡§Ç‡§¶... | Hospital me free health camp...</span>  
</div>  

<div class="hero">  
  <div class="hero-left">  
    <div class="text"><h2>‡§™‡•Ç‡§∞‡•ç‡§µ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§µ‡§∏‡•Å‡§Ç‡§ß‡§∞‡§æ ‡§∞‡§æ‡§ú‡•á ‡§ï‡§æ ‡§∏‡§æ‡§ó‡§µ‡§æ‡§°‡§º‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§</h2></div>  
  </div>  
</div>  

<div class="highlight-box">  
  <div class="highlight">‚ö° ‡§∏‡§æ‡§ó‡§µ‡§æ‡§°‡§º‡§æ ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§≤‡§ø‡§∏ ‡§ü‡•Ä‡§Æ ‡§®‡•á ‡§µ‡•á‡§∂‡•ç‡§Ø‡§æ‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ï‡§æ ‡§≠‡§Ç‡§°‡§æ‡§´‡•ã‡§°‡§º </div>  
  <div class="highlight">üî• ‡§¨‡§æ‡§á‡§ï-‡§ó‡•à‡§Ç‡§ó‡•ç‡§∏ ‡§ï‡•á ‡§ñ‡§ø‡§≤‡§æ‡§´ ‚Äò‡§ì‡§™‡§∞‡•á‡§∂‡§® ‡§∏‡§®‡•ç‡§∏‡•ç‡§ï‡§æ‡§∞‚Äô ‡§∂‡•Å‡§∞‡•Ç</div>  
  <div class="highlight">üöì ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡•ã ‡§≤‡•á‡§ï‡§∞ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§®‡§ø‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§®</div>  
</div>  

<h2 class="section-title">Top Local News</h2>  

<div class="grid"></div>  

<footer>¬© 2025 Dungarpur Live News</footer>  


<!-- POPUP -->  
<div class="popup-bg" id="popup">  
  <div class="popup-box">  
    <img id="pImg" class="popup-img">  
    <div class="popup-title" id="pTitle"></div>  
    <div class="popup-text" id="pText"></div>  

    <div class="btns">  
      <button class="close-btn" onclick="closePopup()">Close</button>  
      <button class="share-btn" onclick="shareNews()">Share</button>  
    </div>  
  </div>  
</div>  


<script>  
function openPopup(title, text, date="", img=""){  
  document.getElementById("pTitle").innerText = title;  
  document.getElementById("pImg").src = img;  

  let finalText = "";  
  if(date){ finalText += "üìÖ " + date + "\n\n"; }  
  finalText += text;  

  document.getElementById("pText").innerText = finalText;  
  document.getElementById("popup").style.display = "flex";  
}  

function closePopup(){  
  document.getElementById("popup").style.display = "none";  
}  

function shareNews(){  
  const appLink = "https://yourappdownloadlink.com";  
  navigator.share({  
    title:"Dungarpur Live News",  
    text:"Check this news on our App",  
    url:appLink  
  }).catch(()=>alert("Share supported nahi hai, link: " + appLink));  
}  
</script>  


<!-- SHEET NEWS (Fixed Date Parser) -->  
<script>

function formatSheetDate(d){
  if(!d) return "";

  // CASE 1: Excel serial number
  if(!isNaN(d)){
    let excelDate = Number(d);
    let jsDate = new Date((excelDate - 25569) * 86400 * 1000);

    let dd = String(jsDate.getDate()).padStart(2,'0');
    let mm = jsDate.getMonth() + 1;
    let yyyy = jsDate.getFullYear();

    let monthName = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][mm-1];
    return `${dd} ${monthName} ${yyyy}`;
  }

  // CASE 2: DD/MM/YYYY
  if(d.includes("/")){
    let [dd, mm, yyyy] = d.split("/");
    let monthName = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][mm-1];
    return `${dd} ${monthName} ${yyyy}`;
  }

  // CASE 3: YYYY-MM-DD
  if(d.includes("-")){
    let [yyyy, mm, dd] = d.split("-");
    let monthName = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][mm-1];
    return `${dd} ${monthName} ${yyyy}`;
  }

  return d;
}

async function loadNews() {  
  const url = "https://docs.google.com/spreadsheets/d/16Lzi_aU5Rg1Py7A0PGbKNJ-1Yu7TjUDCMJa1_R7KnrA/gviz/tq?tqx=out:json";  

  try {  
    let res = await fetch(url);  
    let text = await res.text();  

    let json = JSON.parse(text.substring(text.indexOf("{"), text.lastIndexOf("}") + 1));  
    let rows = json.table.rows.reverse();  
    let html = "";  

    rows.forEach(r => {  
      let title = r.c[0]?.v || "";  
      let img = r.c[1]?.v || "";  
      let desc = r.c[2]?.v || "";  
      let rawDate = r.c[3]?.v || "";  

      let finalDate = formatSheetDate(rawDate);  

      html += `  
        <div class="card" onclick="openPopup('${title.replace(/'/g," ")}','${desc.replace(/'/g," ")}','${finalDate}','${img}')">  
          <img src="${img}">  
          <div class="content">  
            <h3>${title}</h3>  
            <p style="color:#d60000;font-size:12px;font-weight:700;margin-top:4px;">üìÖ ${finalDate}</p>  
            <p>${desc.substring(0, 60)}...</p>  
          </div>  
        </div>  
      `;  
    });  

    document.querySelector(".grid").innerHTML = html;  

  } catch (e) {  
    console.error("SHEET ERROR:", e);  
  }  
}  

loadNews();  
</script>  


<script>  
document.querySelectorAll(".highlight").forEach(box => {  
  box.style.cursor = "pointer";  
  box.addEventListener("click", () => {  
      const text = box.innerText;    
      openPopup("Local Highlight News", text, "", "");  
  });  
});  

document.querySelector(".hero-left").style.cursor = "pointer";  
document.querySelector(".hero-left").addEventListener("click", () => {  
    openPopup(  
      "‡§™‡•Ç‡§∞‡•ç‡§µ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§µ‡§∏‡•Å‡§Ç‡§ß‡§∞‡§æ ‡§∞‡§æ‡§ú‡•á ‡§ï‡§æ ‡§∏‡§æ‡§ó‡§µ‡§æ‡§°‡§º‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§",  
      "‡§∏‡§æ‡§ó‡§µ‡§æ‡§°‡§º‡§æ ‡§¶‡•å‡§∞‡•á ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§™‡•Ç‡§∞‡•ç‡§µ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§µ‡§∏‡•Å‡§Ç‡§ß‡§∞‡§æ ‡§∞‡§æ‡§ú‡•á ‡§ï‡§æ ‡§≠‡§µ‡•ç‡§Ø ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ...",  
      "",  
      "https://c.ndtvimg.com/2025-11/9nrb9sq8_vasundhara-raje-dungarpur_625x300_29_November_25.jpg"  
    );  
});  

document.querySelector(".ticker").style.cursor = "pointer";  
document.querySelector(".ticker").addEventListener("click", () => {  
    const text = document.querySelector(".ticker span").innerText;  
    openPopup("Breaking News", text);  
});  
</script>  

</body>  
</html>
